
style( type="text/css" ).
	.grafico[data-grafico="graficoCasosActivosPorDiaNacional"] {
		width: 3200px !important;
	}
	.grafico[data-grafico="graficoCasosActivosPorDiaNacional"].fixAncho {
		overflow: scroll !important;
		overflow-y: hidden !important;
		overflow-x: auto;
		width: 100% !important;
	}
	
div.grafico(data-grafico="graficoCasosActivosPorDiaNacional")( style='width: 100%; height: 710px;' )

	script( type="text/javascript" ).
	
		var data = "https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto5/TotalesNacionales.csv";
	
		Papa.parse( data , {
			download: true,
			complete: function(results) {
			
				const resultado = new Promise( ( resolve , reject ) => {
					results ? resolve( results ) : reject ();
				} );
				
				resultado
					.then( x => {
						
						google.charts.load('current', {'packages':['corechart']});
						google.charts.setOnLoadCallback(casosNuevos);
				
						function casosNuevos() { 
							var dataContagiosDia = google.visualization.arrayToDataTable([
								['Fecha', 'Casos Activos (Por Día)'],
								['0',  0],
							]);
				
							var options = {
								title : 'Casos Activos (Por Día)',
								vAxis: {title: 'Casos'},
								hAxis: {title: 'Días'},
								seriesType: 'bars',
								colors: ['#886cfe'] ,
								legend: { position: 'top', maxLines: 3 },
								series: {5: {type: 'line'}}        
							};
				
							var chart = new google.visualization.ComboChart(document.querySelector('[data-grafico=graficoCasosActivosPorDiaNacional]'));
							chart.draw(dataContagiosDia, options);
				
							var fechaFila           = x.data[0];
							var casosActivosFila  = x.data[5];
							
							for ( let count = 1; count <= casosActivosFila.length-1; count ++ ) {
								
								let fecha           = fechaFila[count];
								let casosActivos  = casosActivosFila[count];
								casosActivos ? '' : casosActivos = 0;
								var push_todosTotales 	= '[["' + fecha + '",' + casosActivos + ']]';
								dataContagiosDia.addRows(JSON.parse(push_todosTotales));
							};
				
							var chart = new google.visualization.ComboChart(document.querySelector('[data-grafico=graficoCasosActivosPorDiaNacional]'));
							chart.draw(dataContagiosDia, options);
				
						}
						
					} )
					.then( x => {
						setTimeout(function(){
							$( "[data-grafico=graficoCasosActivosPorDiaNacional]" ).addClass( "fixAncho" );
						},1000);
					} )
				
			}
		})
	